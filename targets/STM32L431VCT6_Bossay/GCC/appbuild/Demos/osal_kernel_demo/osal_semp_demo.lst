ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4YCvhl.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 6
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"osal_semp_demo.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.comm	sync_semp,4,4
  18              		.section	.rodata
  19              		.align	2
  20              	.LC0:
  21 0000 7461736B 		.ascii	"task 1 post a semp!\015\000"
  21      20312070 
  21      6F737420 
  21      61207365 
  21      6D70210D 
  22              		.section	.text.user_task1_entry,"ax",%progbits
  23              		.align	1
  24              		.arch armv7e-m
  25              		.syntax unified
  26              		.thumb
  27              		.thumb_func
  28              		.fpu fpv4-sp-d16
  30              	user_task1_entry:
  31              	.LFB3:
  32              		.file 1 "d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo/osal_semp_demo.c"
   1:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c **** /* 使用osal接口需要包含该头文件 */
   2:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c **** #include <osal.h>
   3:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c **** 
   4:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c **** /* 任务优先级宏定义（shell任务的优先级为10） */
   5:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c **** #define USER_TASK1_PRI  12  //低优先级
   6:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c **** #define USER_TASK2_PRI  11  //高优先级
   7:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c **** 
   8:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c **** /* 信号量索引ID */
   9:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c **** osal_semp_t sync_semp;
  10:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c **** 
  11:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c **** /* 任务task1入口函数 */
  12:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c **** static int user_task1_entry()
  13:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c **** {
  33              		.loc 1 13 1
  34              		.cfi_startproc
  35              		@ args = 0, pretend = 0, frame = 0
  36              		@ frame_needed = 1, uses_anonymous_args = 0
  37 0000 80B5     		push	{r7, lr}
  38              	.LCFI0:
  39              		.cfi_def_cfa_offset 8
  40              		.cfi_offset 7, -8
  41              		.cfi_offset 14, -4
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4YCvhl.s 			page 2


  42 0002 00AF     		add	r7, sp, #0
  43              	.LCFI1:
  44              		.cfi_def_cfa_register 7
  45              	.L2:
  14:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c ****     while(1)
  15:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c ****     {
  16:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c ****         /* 在串口打印信息 */
  17:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c ****         printf("task 1 post a semp!\r\n");
  46              		.loc 1 17 9 discriminator 1
  47 0004 0648     		ldr	r0, .L3
  48 0006 FFF7FEFF 		bl	puts
  18:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c **** 
  19:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c ****         /* 打印完毕释放信号量 */
  20:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c ****         osal_semp_post(sync_semp);
  49              		.loc 1 20 9 discriminator 1
  50 000a 064B     		ldr	r3, .L3+4
  51 000c 1B68     		ldr	r3, [r3]
  52 000e 1846     		mov	r0, r3
  53 0010 FFF7FEFF 		bl	osal_semp_post
  21:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c **** 
  22:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c ****         /* 任务主动挂起2s */
  23:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c ****         osal_task_sleep(2*1000);
  54              		.loc 1 23 9 discriminator 1
  55 0014 4FF4FA60 		mov	r0, #2000
  56 0018 FFF7FEFF 		bl	osal_task_sleep
  17:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c **** 
  57              		.loc 1 17 9 discriminator 1
  58 001c F2E7     		b	.L2
  59              	.L4:
  60 001e 00BF     		.align	2
  61              	.L3:
  62 0020 00000000 		.word	.LC0
  63 0024 00000000 		.word	sync_semp
  64              		.cfi_endproc
  65              	.LFE3:
  67              		.section	.rodata
  68 0015 000000   		.align	2
  69              	.LC1:
  70 0018 7461736B 		.ascii	"task2 is waiting for a semp...\015\000"
  70      32206973 
  70      20776169 
  70      74696E67 
  70      20666F72 
  71              		.align	2
  72              	.LC2:
  73 0038 7461736B 		.ascii	"task 2 access a semp!\015\000"
  73      20322061 
  73      63636573 
  73      73206120 
  73      73656D70 
  74              		.section	.text.user_task2_entry,"ax",%progbits
  75              		.align	1
  76              		.syntax unified
  77              		.thumb
  78              		.thumb_func
  79              		.fpu fpv4-sp-d16
  81              	user_task2_entry:
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4YCvhl.s 			page 3


  82              	.LFB4:
  24:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c ****     }
  25:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c ****     return 0;
  26:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c **** }
  27:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c **** 
  28:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c **** /* 任务task2入口函数 */
  29:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c **** static int user_task2_entry()
  30:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c **** {
  83              		.loc 1 30 1
  84              		.cfi_startproc
  85              		@ args = 0, pretend = 0, frame = 0
  86              		@ frame_needed = 1, uses_anonymous_args = 0
  87 0000 80B5     		push	{r7, lr}
  88              	.LCFI2:
  89              		.cfi_def_cfa_offset 8
  90              		.cfi_offset 7, -8
  91              		.cfi_offset 14, -4
  92 0002 00AF     		add	r7, sp, #0
  93              	.LCFI3:
  94              		.cfi_def_cfa_register 7
  95              	.L6:
  31:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c ****     while (1)
  32:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c ****     {
  33:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c ****         /* 优先级高，抢占执行打印信息 */
  34:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c ****         printf("task2 is waiting for a semp...\r\n");
  96              		.loc 1 34 9 discriminator 1
  97 0004 0648     		ldr	r0, .L7
  98 0006 FFF7FEFF 		bl	puts
  35:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c **** 
  36:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c ****         /* 申请信号量，申请失败则挂起等待 */
  37:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c ****         osal_semp_pend(sync_semp, cn_osal_timeout_forever);
  99              		.loc 1 37 9 discriminator 1
 100 000a 064B     		ldr	r3, .L7+4
 101 000c 1B68     		ldr	r3, [r3]
 102 000e 4FF0FF31 		mov	r1, #-1
 103 0012 1846     		mov	r0, r3
 104 0014 FFF7FEFF 		bl	osal_semp_pend
  38:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c **** 
  39:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c ****         /* 一旦申请到信号量，则恢复执行 */
  40:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c ****         printf("task 2 access a semp!\r\n");
 105              		.loc 1 40 9 discriminator 1
 106 0018 0348     		ldr	r0, .L7+8
 107 001a FFF7FEFF 		bl	puts
  34:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c **** 
 108              		.loc 1 34 9 discriminator 1
 109 001e F1E7     		b	.L6
 110              	.L8:
 111              		.align	2
 112              	.L7:
 113 0020 18000000 		.word	.LC1
 114 0024 00000000 		.word	sync_semp
 115 0028 38000000 		.word	.LC2
 116              		.cfi_endproc
 117              	.LFE4:
 119              		.section	.rodata
 120 004f 00       		.align	2
 121              	.LC3:
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4YCvhl.s 			page 4


 122 0050 73796E63 		.ascii	"sync_semp semp create success.\015\000"
 122      5F73656D 
 122      70207365 
 122      6D702063 
 122      72656174 
 123              		.align	2
 124              	.LC4:
 125 0070 75736572 		.ascii	"user_task1\000"
 125      5F746173 
 125      6B3100
 126 007b 00       		.align	2
 127              	.LC5:
 128 007c 75736572 		.ascii	"user_task2\000"
 128      5F746173 
 128      6B3200
 129              		.section	.text.standard_app_demo_main,"ax",%progbits
 130              		.align	1
 131              		.global	standard_app_demo_main
 132              		.syntax unified
 133              		.thumb
 134              		.thumb_func
 135              		.fpu fpv4-sp-d16
 137              	standard_app_demo_main:
 138              	.LFB5:
  41:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c ****     }
  42:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c ****     return 0;
  43:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c **** }
  44:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c **** 
  45:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c **** /* 标准demo启动函数，函数名不要修改，否则会影响下一步实验 */
  46:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c **** int standard_app_demo_main()
  47:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c **** {
 139              		.loc 1 47 1
 140              		.cfi_startproc
 141              		@ args = 0, pretend = 0, frame = 0
 142              		@ frame_needed = 1, uses_anonymous_args = 0
 143 0000 80B5     		push	{r7, lr}
 144              	.LCFI4:
 145              		.cfi_def_cfa_offset 8
 146              		.cfi_offset 7, -8
 147              		.cfi_offset 14, -4
 148 0002 82B0     		sub	sp, sp, #8
 149              	.LCFI5:
 150              		.cfi_def_cfa_offset 16
 151 0004 02AF     		add	r7, sp, #8
 152              	.LCFI6:
 153              		.cfi_def_cfa 7, 8
  48:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c ****     /* 创建信号量sync_semp */
  49:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c ****     osal_semp_create(&sync_semp, 1, 0);
 154              		.loc 1 49 5
 155 0006 0022     		movs	r2, #0
 156 0008 0121     		movs	r1, #1
 157 000a 1048     		ldr	r0, .L11
 158 000c FFF7FEFF 		bl	osal_semp_create
  50:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c ****     printf("sync_semp semp create success.\r\n");
 159              		.loc 1 50 5
 160 0010 0F48     		ldr	r0, .L11+4
 161 0012 FFF7FEFF 		bl	puts
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4YCvhl.s 			page 5


  51:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c **** 
  52:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c ****     /* 创建任务task1 */
  53:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c ****     osal_task_create("user_task1",user_task1_entry,NULL,0x400,NULL,USER_TASK1_PRI);
 162              		.loc 1 53 5
 163 0016 0C23     		movs	r3, #12
 164 0018 0193     		str	r3, [sp, #4]
 165 001a 0023     		movs	r3, #0
 166 001c 0093     		str	r3, [sp]
 167 001e 4FF48063 		mov	r3, #1024
 168 0022 0022     		movs	r2, #0
 169 0024 0B49     		ldr	r1, .L11+8
 170 0026 0C48     		ldr	r0, .L11+12
 171 0028 FFF7FEFF 		bl	osal_task_create
  54:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c **** 
  55:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c ****     /* 创建任务task2 */
  56:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c ****     osal_task_create("user_task2",user_task2_entry,NULL,0x400,NULL,USER_TASK2_PRI);
 172              		.loc 1 56 5
 173 002c 0B23     		movs	r3, #11
 174 002e 0193     		str	r3, [sp, #4]
 175 0030 0023     		movs	r3, #0
 176 0032 0093     		str	r3, [sp]
 177 0034 4FF48063 		mov	r3, #1024
 178 0038 0022     		movs	r2, #0
 179 003a 0849     		ldr	r1, .L11+16
 180 003c 0848     		ldr	r0, .L11+20
 181 003e FFF7FEFF 		bl	osal_task_create
  57:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c **** 
  58:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c ****     return 0;
 182              		.loc 1 58 12
 183 0042 0023     		movs	r3, #0
  59:d:/LiteOS_Lab/targets/STM32L431VCT6_Bossay/Demos/osal_kernel_demo\osal_semp_demo.c **** }...
 184              		.loc 1 59 1
 185 0044 1846     		mov	r0, r3
 186 0046 BD46     		mov	sp, r7
 187              	.LCFI7:
 188              		.cfi_def_cfa_register 13
 189              		@ sp needed
 190 0048 80BD     		pop	{r7, pc}
 191              	.L12:
 192 004a 00BF     		.align	2
 193              	.L11:
 194 004c 00000000 		.word	sync_semp
 195 0050 50000000 		.word	.LC3
 196 0054 00000000 		.word	user_task1_entry
 197 0058 70000000 		.word	.LC4
 198 005c 00000000 		.word	user_task2_entry
 199 0060 7C000000 		.word	.LC5
 200              		.cfi_endproc
 201              	.LFE5:
 203              		.text
 204              	.Letext0:
 205              		.file 2 "c:\\users\\administrator\\.huawei-liteos-studio\\tools\\arm-none-eabi\\arm-none-eabi\\inc
 206              		.file 3 "c:\\users\\administrator\\.huawei-liteos-studio\\tools\\arm-none-eabi\\arm-none-eabi\\inc
 207              		.file 4 "c:\\users\\administrator\\.huawei-liteos-studio\\tools\\arm-none-eabi\\lib\\gcc\\arm-none
 208              		.file 5 "c:\\users\\administrator\\.huawei-liteos-studio\\tools\\arm-none-eabi\\arm-none-eabi\\inc
 209              		.file 6 "d:/LiteOS_Lab/iot_link/os/osal/osal_types.h"
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4YCvhl.s 			page 6


DEFINED SYMBOLS
                            *ABS*:00000000 osal_semp_demo.c
                            *COM*:00000004 sync_semp
C:\Users\ADMINI~1\AppData\Local\Temp\cc4YCvhl.s:19     .rodata:00000000 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cc4YCvhl.s:23     .text.user_task1_entry:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cc4YCvhl.s:30     .text.user_task1_entry:00000000 user_task1_entry
C:\Users\ADMINI~1\AppData\Local\Temp\cc4YCvhl.s:62     .text.user_task1_entry:00000020 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cc4YCvhl.s:75     .text.user_task2_entry:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cc4YCvhl.s:81     .text.user_task2_entry:00000000 user_task2_entry
C:\Users\ADMINI~1\AppData\Local\Temp\cc4YCvhl.s:113    .text.user_task2_entry:00000020 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cc4YCvhl.s:130    .text.standard_app_demo_main:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cc4YCvhl.s:137    .text.standard_app_demo_main:00000000 standard_app_demo_main
C:\Users\ADMINI~1\AppData\Local\Temp\cc4YCvhl.s:194    .text.standard_app_demo_main:0000004c $d

UNDEFINED SYMBOLS
puts
osal_semp_post
osal_task_sleep
osal_semp_pend
osal_semp_create
osal_task_create
